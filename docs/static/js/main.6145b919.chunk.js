(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),o=(a(80),a(5)),l=a.n(o),s=a(9),u=a(47),m=a(48),p=a(69),d=a(49),f=a(70),h=a(127),v=a(133),w=function(){return r.a.createElement(v.a,{background:"brand",height:"xxsmall",justify:"center",pad:"small"},"SaveMyThesis")},E=a(136),x=function(e){var t=e.text,a=e.onChangeText;return r.a.createElement(v.a,{pad:"medium",fill:"vertical",width:"40%"},r.a.createElement(E.a,{placeholder:"Start writing your text here!",fill:!0,value:t,onChange:function(e){return a(e.target.value)}}))},b=a(132),y=function(e){var t=e.rawText;return r.a.createElement(v.a,{pad:"medium",fill:"vertical",width:"40%"},r.a.createElement(v.a,{border:"all",fill:"vertical",pad:"medium",overflow:{vertical:"scroll"}},r.a.createElement(b.a,null,t)))},g=a(25),k=a(134),j=a(137),O=a(135),I=a(65),C=a.n(I),T=a(66),V=a.n(T),S=a(67),D=a.n(S),B=a(72),H=function(e){return Object(B.a)({},e,{timestamp:1e3*e.timestamp})},L=D.a.create({baseURL:"https://savemythesis.westeurope.cloudapp.azure.com:5000",timeout:1e3}),_=function(){var e=Object(s.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.get("/history");case 3:return t=e.sent,a=t.data.map(function(e){return H(e)}),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(s.a)(l.a.mark(function e(t,a){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.post("/version",{text:t,author:a});case 3:return n=e.sent,r=H(n.data),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.get("/version/".concat(t));case 3:return a=e.sent,n=H(a.data),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.versionId,a=e.previousVersionId,c=Object(n.useState)(!0),i=Object(g.a)(c,2),o=i[0],u=i[1],m=Object(n.useState)({}),p=Object(g.a)(m,2),d=p[0],f=p[1],h=Object(n.useState)({}),w=Object(g.a)(h,2),E=w[0],x=w[1],b=function(){var e=Object(s.a)(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,A(t);case 3:a=e.sent,f(a),u(!1);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),!a){e.next=7;break}return e.next=4,A(a);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={};case 8:t=e.t0,x(t),u(!1);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){b(),y()},[t,a]),r.a.createElement(v.a,{pad:"medium",fill:"vertical",width:"80%"},o?r.a.createElement(v.a,{justify:"center",align:"center",direction:"row",fill:!0},r.a.createElement(V.a,{type:"spin",color:"#7D4CDB",height:"150px",width:"150px"})):r.a.createElement(v.a,{border:"all",fill:"vertical",pad:"medium",overflow:"scroll"},r.a.createElement(k.a,{level:3},d.commitTitle,r.a.createElement(j.a,{weight:"normal"}," - ".concat(new Date(d.timestamp).toDateString()," by ").concat(d.author))),r.a.createElement(j.a,null,d.commitText),r.a.createElement(O.a,null),r.a.createElement(C.a,{oldValue:E.text,newValue:d.text})))},M=a(128),W=a(129),F=a(130),N=a(131),R={change:r.a.createElement(M.a,null),add:r.a.createElement(W.a,null),remove:r.a.createElement(F.a,null)},U=function(e){var t=e.commitTitle,a=e.timestamp,n=e.author,c=e.onClick,i=t.split(" ")[0].toLowerCase();return r.a.createElement(v.a,{className:"pointer",direction:"row",onClick:function(){return c()},flex:!1},r.a.createElement(v.a,{fill:"vertical",border:{side:"left",color:"dark-3"},justify:"center",height:"small"},r.a.createElement(v.a,{style:{backgroundColor:"white",marginLeft:"-11px"}},R[i]||r.a.createElement(N.a,null))),r.a.createElement(v.a,{pad:"small",justify:"center"},r.a.createElement(j.a,null,t),r.a.createElement(j.a,{size:"small"},"".concat(new Date(a).toDateString()," by ").concat(n))))},Y=function(e){var t=e.history,a=e.onClickItem;return r.a.createElement(v.a,{pad:"medium",fill:"vertical",width:"20%"},r.a.createElement(v.a,{fill:"vertical",pad:"medium",elevation:"medium",overflow:{vertical:"scroll"}},r.a.createElement(j.a,{color:"brand",weight:"bold"},"History"),r.a.createElement(v.a,{pad:{vertical:"small"}},r.a.createElement(U,{commitTitle:"Current version",timestamp:(new Date).getTime(),author:"You",onClick:function(){return a(null)}}),t.map(function(e){var t=e._id,n=e.commitTitle,c=e.timestamp,i=e.author;return r.a.createElement(U,{key:t,commitTitle:n,timestamp:c,author:i,onClick:function(){return a(t)}})}))))},$=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",activeVersionId:null,previousVersionId:null,history:[]},a.handleEditorTextChange=function(e){a.setState({text:e})},a.handleClickHistoryItem=function(e){var t=a.state.history.findIndex(function(t){return t._id===e});t===a.state.history.length-1?a.setState({activeVersionId:e,previousVersionId:e}):a.setState({activeVersionId:e,previousVersionId:a.state.history[t+1]._id})},a.postVersion=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(a.state.text,"Author");case 2:setTimeout(Object(s.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,a.setState({history:t});case 4:case"end":return e.stop()}},e)})),2e3);case 3:case"end":return e.stop()}},e)})),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,this.setState({history:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(h.a,{onTab:this.postVersion,target:"document"},r.a.createElement(v.a,null,r.a.createElement(w,null),r.a.createElement(v.a,{direction:"row",fill:"vertical"},this.state.activeVersionId?r.a.createElement(J,{versionId:this.state.activeVersionId,previousVersionId:this.state.previousVersionId}):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{text:this.state.text,onChangeText:this.handleEditorTextChange}),r.a.createElement(y,{rawText:this.state.text})),r.a.createElement(Y,{history:this.state.history,onClickItem:this.handleClickHistoryItem}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,a){e.exports=a(113)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.6145b919.chunk.js.map